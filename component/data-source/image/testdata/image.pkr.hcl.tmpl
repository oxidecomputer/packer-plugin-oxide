data "oxide-image" "test" {
  name    = "{{ .Name }}"
  {{- if not .SiloImage }}
  project = "{{ .Project }}"
  {{- end }}
  {{- if .InsecureSkipVerify }}
  insecure_skip_verify = true
  {{- end }}
}

locals {
  image_id = data.oxide-image.test.image_id
}

source "null" "test" {
  communicator = "none"
}

build {
  sources = [
    "sources.null.test"
  ]
}
